<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
        <title>bash base - Wiki · yxjxx</title>
        <meta name="keywords" content="wiki, markdown, linux ,python ,mac os x,simiki"/>
        <meta name="description" content="yxjxx's personal wiki, powered by vim and markdown.Focus on python, Liunx, iOS, and so on."/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="container">
            
<div id="header">
  <div id="post-nav"><a href="/">Home</a>&nbsp;»&nbsp;<a href="/#linux">linux</a>&nbsp;»&nbsp;bash base</div>
</div>
<div class="clearfix"></div>
<div id="title">bash base</div>
  <div id="content">
  <h1 id="bash-base">bash-base</h1>
<p><strong>一些基础常识</strong></p>
<p>查看本机已经安装了的shell:</p>
<div class="hlcode"><pre><span class="c">#cat /etc/shells</span>
</pre></div>


<p><img alt="我的shells" src="http://ww1.sinaimg.cn/large/81d2b157jw1e7nkaq6hw7j209a03rjri.jpg" /></p>
<p>查看正在使用的shell:</p>
<div class="hlcode"><pre><span class="c">#echo $SHELL</span>
</pre></div>


<p><img alt="我的正在使用的shell" src="http://ww2.sinaimg.cn/large/81d2b157jw1e7nkcnvq1rj205r00x744.jpg" /></p>
<p>切换shell:</p>
<div class="hlcode"><pre><span class="c">#chsh -s /bin/zsh</span>
</pre></div>


<p><img alt="切换到zsh" src="http://ww4.sinaimg.cn/large/81d2b157jw1e7nklb64xpj20cz08amxz.jpg" /></p>
<p>重启系统之后生效</p>
<p>查看/etc/passwd文件了解更详细的关于每个用户的默认shell的信息:</p>
<p><img alt="shell详细信息" src="http://ww4.sinaimg.cn/large/81d2b157jw1e7nkqek1q3j20i70hpaeu.jpg" /></p>
<p>shell的命令历史记录功能:</p>
<div class="hlcode"><pre><span class="nx">bash</span><span class="err">存放在~</span><span class="p">/</span><span class="nx">.bash_history</span>
<span class="nx">zsh</span><span class="err">存放在~</span><span class="p">/</span><span class="nx">.zsh_history</span>
<span class="err">在终端中输入命令时先按下</span><span class="o">&lt;</span><span class="nx">Ctrl</span><span class="o">&gt;+</span><span class="nb">r</span><span class="err">之后</span><span class="nx">shell</span><span class="err">就会去历史记录里面搜索是否有匹配的</span><span class="p">,</span><span class="err">肯定是时间倒序匹配啦</span><span class="o">!</span>
<span class="err">就是说有多条记录匹配的情况先显示的时间最近的一条命令</span>
</pre></div>


<p>命令与文件补全<code>&lt;Tab&gt;</code>键,就不细说了,都知道<code>&lt;Tab&gt;</code>的好,特别是在zsh下</p>
<p>命令别名设置(alias)</p>
<div class="hlcode"><pre><span class="n">alias</span><span class="err">命令显示你现在已经设置的别名</span>
<span class="n">alias</span> <span class="n">lm</span><span class="o">=</span><span class="err">&#39;</span><span class="n">ls</span> <span class="o">-</span><span class="n">al</span><span class="err">&#39;</span>  <span class="err">#可以设置别名</span>
</pre></div>


<p><img alt="alias" src="http://ww2.sinaimg.cn/large/81d2b157jw1e7nljoxl32j20b104mdg9.jpg" /></p>
<p>通配符(正则表达式)</p>
<div class="hlcode"><pre><span class="o">*</span><span class="err">表示一个或多个字符</span>
<span class="o">?</span><span class="err">表示一个字符</span>
<span class="p">[</span><span class="n">abc</span><span class="p">]</span><span class="err">表示</span><span class="n">a</span><span class="err">或者</span><span class="n">b</span><span class="err">或者</span><span class="n">c</span>
<span class="err">等等</span>
</pre></div>


<p>查询是否为bash shell的内置命令  type</p>
<div class="hlcode"><pre><span class="n">type</span> <span class="p">[</span><span class="o">-</span><span class="n">afptP</span><span class="p">]</span> <span class="err">名称</span> <span class="p">[</span><span class="err">名称</span> <span class="p">...]</span>
</pre></div>


<p>命令太长,转义字符</p>
<div class="hlcode"><pre><span class="err">命令太长</span><span class="p">,</span><span class="err">一行打不下，先输入一个</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">再输入一个&lt;Enter&gt;</span>
<span class="s1">换行之后可以看到一个&#39;</span><span class="o">&gt;</span><span class="s1">&#39;符号,就是转义成功了</span>
</pre></div>


<p><img alt="转义" src="http://ww1.sinaimg.cn/large/81d2b157jw1e7nmjx2mdzj20h801rq30.jpg" /></p>
<p>环境变量都全部大写</p>
<p>例如:PATH HOME MAIL SHELL</p>
<p>显示变量的内容;echo命令</p>
<div class="hlcode"><pre>echo <span class="nv">$PATH</span>
echo <span class="cp">${</span><span class="n">PATH</span><span class="cp">}</span>
两种方式都可以
</pre></div>


<p>设置自己的shell变量:</p>
<div class="hlcode"><pre><span class="err">未设置的变量默认为空</span>
<span class="err">设置变量</span><span class="n">myname</span> <span class="o">:</span> <span class="err">直接输入</span>  <span class="n">myname</span><span class="o">=</span><span class="n">yxjxx</span>
<span class="err">取消变量</span><span class="n">myname</span> <span class="o">:</span> <span class="n">unset</span> <span class="n">myname</span>
</pre></div>


<p><img alt="设置变量" src="http://ww4.sinaimg.cn/large/81d2b157jw1e7nnfvhl2vj209q05n3yy.jpg" /></p>
<p>双引号单引号内的变量:</p>
<div class="hlcode"><pre><span class="err">双引号内的特殊字符</span><span class="p">,</span><span class="err">可以表示它的指代义</span>
<span class="err">单引号内的特殊字符</span><span class="p">,</span><span class="err">就只能是字符了</span>
<span class="err">双引号内的特殊字符如果不想要它的指代义可以用&#39;\&#39;转义掉</span>
</pre></div>


<p><img alt="引号内的变量" src="http://ww2.sinaimg.cn/large/81d2b157jw1e7nnrv5rw5j20940ad3zi.jpg" /></p>
<p>在一串命令中用到其它命令的输出信息时:</p>
<div class="hlcode"><pre><span class="n">version</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="n">uname</span> <span class="o">-</span><span class="n">r</span><span class="p">)</span>
<span class="n">version</span><span class="o">=</span><span class="err">`</span><span class="n">uname</span> <span class="o">-</span><span class="n">r</span><span class="err">`</span>
</pre></div>


<p><img alt="" src="http://ww1.sinaimg.cn/large/81d2b157jw1e7nnwfkv3bj209t05x74w.jpg" /></p>
<p>为变量增加字符:</p>
<div class="hlcode"><pre>PATH=<span class="nv">$PATH</span>:/home/bin
PATH=&quot;<span class="nv">$PATH</span>&quot;:/home/bin   或者
PATH=<span class="cp">${</span><span class="n">PATH</span><span class="cp">}</span>:/home/bin
PATH=&quot;<span class="cp">${</span><span class="n">PATH</span><span class="cp">}</span>&quot;:/home/bin 都行
</pre></div>


<p><img alt="" src="http://ww2.sinaimg.cn/large/81d2b157jw1e7no1wpg10j20i7065400.jpg" /></p>
<p>若该变量需要在其它子进程中执行,则需要以export来使变量变成环境变量</p>
<div class="hlcode"><pre><span class="n">export</span> <span class="n">var</span>
</pre></div>


<p>一个习惯:通常系统默认变量为大写,用户自定义的变量最好设为小写</p>
<p>查看环境变量</p>
<div class="hlcode"><pre><span class="n">env</span>
<span class="n">set</span>
<span class="n">export</span>
</pre></div>


<p>子进程仅会继承父进程的环境变量,不会继承父进程的自定义变量
将环境变量转换成自定义变量用 <code>declare</code>命令</p>
<hr />
<p>变量的键盘读取,数组与声明</p>
<div class="hlcode"><pre><span class="n">read</span> <span class="p">[</span><span class="o">-</span><span class="n">pt</span><span class="p">]</span> <span class="n">variable</span>
<span class="o">-</span><span class="n">p</span> <span class="o">:</span> <span class="err">后面接提示语</span>
<span class="o">-</span><span class="n">t</span> <span class="o">:</span> <span class="err">后面接等待的秒数</span>
</pre></div>


<div class="hlcode"><pre><span class="n">declare</span> <span class="p">[</span><span class="o">-</span><span class="n">aixr</span><span class="p">]</span> <span class="n">variable</span>

<span class="o">-</span><span class="n">a</span> <span class="o">:</span> <span class="err">数组</span>
<span class="o">-</span><span class="n">i</span> <span class="o">:</span> <span class="err">整数</span>
<span class="o">-</span><span class="n">x</span> <span class="o">:</span> <span class="err">将后面的</span><span class="n">variable</span><span class="err">变成环境变量同</span><span class="n">export</span>
<span class="o">-</span><span class="n">r</span> <span class="o">:</span> <span class="err">设置成</span><span class="n">readonly</span>
</pre></div>


<p><code>文件系统及程序的限制关系:ulimit</code></p>
<p>变量的测试与内容替换:</p>
<div class="hlcode"><pre>var=<span class="cp">${</span><span class="nb">str</span><span class="o">-</span><span class="n">expr</span><span class="cp">}</span>
等等...
</pre></div>


<hr />
<p>查找命令的顺序:</p>
<ol>
<li>以绝对或相对路径执行的命令,已经指定了文件</li>
<li>由alias找到该命令执行</li>
<li>由bash内置的命令来执行</li>
<li>通过${PATH}变量找到第一个命令来执行</li>
<li>可以通过<code>type -a cmd</code>(cmd为你要查询的命令)查看找寻顺序</li>
</ol>
<hr />
<p>loginshell和non-loginshell读取的配置文件不一样</p>
<p>loginshell会在bash登录的时候去读取</p>
<div class="hlcode"><pre><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">profile</span><span class="p">(</span><span class="err">系统整体的设置</span><span class="p">,</span><span class="err">不要去修改</span><span class="p">)</span>
<span class="o">~/</span><span class="p">.</span><span class="n">bash_profile</span>
<span class="err">或</span><span class="o">~/</span><span class="p">.</span><span class="n">bash_login</span>
<span class="err">或</span><span class="o">~/</span><span class="p">.</span><span class="n">profile</span>
</pre></div>


<hr />
<p>终端机的环境设置</p>
<div class="hlcode"><pre><span class="n">stty</span><span class="p">(</span><span class="err">自己</span><span class="n">man</span><span class="err">一下吧</span><span class="p">)</span>
</pre></div>
</div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2012-2015 yxjxx.
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
        
    </body>
</html>