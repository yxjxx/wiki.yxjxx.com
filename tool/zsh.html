<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
        <title>zsh - Wiki · yxjxx</title>
        <meta name="keywords" content="wiki, markdown, linux ,python ,mac os x,simiki"/>
        <meta name="description" content="yxjxx's personal wiki, powered by vim and markdown.Focus on python, Liunx, iOS, and so on."/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="container">
            
<div id="header">
  <div id="post-nav"><a href="/">Home</a>&nbsp;»&nbsp;<a href="/#tool">tool</a>&nbsp;»&nbsp;zsh</div>
</div>
<div class="clearfix"></div>
<div id="title">zsh</div>
  <div id="content">
  <h1 id="zsh-configuration-guide">zsh configuration guide</h1>
<p><br/></p>
<h2 id="_1">参考资料:</h2>
<ol>
<li><a href="http://macshuo.com/?p=676">Mac技巧_终极shell</a></li>
<li><a href="http://foocoder.com/blog/wo-zai-yong-de-macruan-jian-2.html/">fooCoder_我在用的mac软件(2)-终端环境之zsh和z(*nix都适用)</a></li>
<li><a href="http://leeiio.me/bash-to-zsh-for-mac/">zsh – 给你的Mac不同体验的Terminal！</a></li>
<li><a href="http://lostjs.com/2012/09/27/zsh/">选择zsh的9个理由</a></li>
<li><a href="https://github.com/robbyrussell/oh-my-zsh">oh my zsh github mainpage</a></li>
</ol>
<p><strong>上面3篇博文的介绍大同小异,oh my zsh是简化zsh配置的一个开源项目</strong></p>
<hr />
<h3 id="1-shell">1. 查看自己的系统已经安装了哪些shell</h3>
<div class="hlcode"><pre><span class="n">cat</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">shells</span>
</pre></div>


<p>我的Linux Mint15默认安装下面的shell</p>
<div class="hlcode"><pre><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">sh</span>
<span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">dash</span>
<span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">bash</span>
<span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">rbash</span>
</pre></div>


<hr />
<h3 id="2zsh">2.安装zsh</h3>
<p>Ubuntu系</p>
<div class="hlcode"><pre><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">zsh</span>
</pre></div>


<p>Redhat系</p>
<div class="hlcode"><pre><span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">zsh</span>
</pre></div>


<p>安装完成之后再查看一下</p>
<div class="hlcode"><pre><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">sh</span>
<span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">dash</span>
<span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">bash</span>
<span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">rbash</span>
<span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">zsh</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">zsh</span>
</pre></div>


<p>现在就可以切换到zsh了</p>
<div class="hlcode"><pre><span class="cp">#chsh -s /bin/zsh</span>
<span class="err">重启电脑之后生效，以后新开的</span><span class="n">Terminal</span><span class="err">就都是</span><span class="n">zsh</span><span class="err">了</span>
</pre></div>


<hr />
<h3 id="3-oh-my-zsh">3. 安装oh my zsh</h3>
<div class="hlcode"><pre><span class="n">wget</span> <span class="n">https</span><span class="o">:</span><span class="c1">//github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh</span>
</pre></div>


<h3 id="4-zsh">4. 配置zsh</h3>
<p>zsh的主要配置集中在~/.zshrc文件中
用vim打开，可以看到</p>
<div class="hlcode"><pre><span class="cp"># Path to your oh-my-zsh configuration.</span>
<span class="n">ZSH</span><span class="o">=</span><span class="err">$</span><span class="n">HOME</span><span class="o">/</span><span class="p">.</span><span class="n">oh</span><span class="o">-</span><span class="n">my</span><span class="o">-</span><span class="n">zsh</span>
<span class="p">......</span>
<span class="cp"># Customize to your needs...</span>
<span class="n">export</span> <span class="n">PATH</span><span class="o">=</span><span class="err">$</span><span class="n">PATH</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">sbin</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">:/</span><span class="n">sbin</span><span class="o">:/</span><span class="n">bin</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">games</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">games</span>
</pre></div>


<p>一大段配置zsh的示例,最后说你可以按照自己的需求自定义</p>
<h5 id="_2">环境变量</h5>
<div class="hlcode"><pre><span class="n">export</span> <span class="n">PATH</span><span class="o">=</span><span class="err">$</span><span class="n">PATH</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">sbin</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">:/</span><span class="n">sbin</span><span class="o">:/</span><span class="n">bin</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">games</span><span class="o">:/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">games</span>
<span class="err">已经自动导入了</span><span class="n">bash</span><span class="err">的环境变量，还可以自己按要求添加</span>
</pre></div>


<h5 id="_3">别名设置</h5>
<div class="hlcode"><pre><span class="n">alias</span> <span class="n">cls</span><span class="o">=</span><span class="err">&#39;</span><span class="n">clear</span><span class="err">&#39;</span>
<span class="n">alias</span> <span class="n">ll</span><span class="o">=</span><span class="err">&#39;</span><span class="n">ls</span> <span class="o">-</span><span class="n">l</span><span class="err">&#39;</span>
<span class="n">alias</span> <span class="n">la</span><span class="o">=</span><span class="err">&#39;</span><span class="n">ls</span> <span class="o">-</span><span class="n">al</span><span class="err">&#39;</span>
<span class="n">alias</span> <span class="o">-</span><span class="n">s</span> <span class="n">md</span><span class="o">=</span><span class="n">mdcharm</span>   <span class="err">#在命令行直接输入后缀为</span> <span class="n">md</span> <span class="err">的文件名，会在</span> <span class="n">mdcharm</span> <span class="err">中打开</span>
<span class="n">alias</span> <span class="o">-</span><span class="n">s</span> <span class="n">c</span><span class="o">=</span><span class="n">vi</span>         <span class="err">#在命令行直接输入后缀为</span> <span class="n">c</span> <span class="err">的文件名，会在</span> <span class="n">vi</span> <span class="err">中打开</span><span class="p">,</span><span class="err">下类似</span>
<span class="n">alias</span> <span class="o">-</span><span class="n">s</span> <span class="n">gz</span><span class="o">=</span><span class="err">&#39;</span><span class="n">tar</span> <span class="o">-</span><span class="n">xzvf</span><span class="err">&#39;</span>
<span class="n">alias</span> <span class="o">-</span><span class="n">s</span> <span class="n">tgz</span><span class="o">=</span><span class="err">&#39;</span><span class="n">tar</span> <span class="o">-</span><span class="n">xzvf</span><span class="err">&#39;</span>
<span class="n">alias</span> <span class="o">-</span><span class="n">s</span> <span class="n">zip</span><span class="o">=</span><span class="err">&#39;</span><span class="n">unzip</span><span class="err">&#39;</span>
<span class="n">alias</span> <span class="o">-</span><span class="n">s</span> <span class="n">bz2</span><span class="o">=</span><span class="err">&#39;</span><span class="n">tar</span> <span class="o">-</span><span class="n">xjvf</span><span class="err">&#39;</span>
</pre></div>


<h5 id="_4">主题设置</h5>
<p>在~/zshrc文件中可以看到一行</p>
<div class="hlcode"><pre><span class="n">ZSH_THEME</span><span class="o">=</span><span class="s">&quot;robbyrussell&quot;</span>
<span class="n">robbyrussell</span><span class="err">是默认主题</span>
<span class="err">在</span><span class="o">~/</span><span class="p">.</span><span class="n">oh</span><span class="o">-</span><span class="n">my</span><span class="o">-</span><span class="n">zsh</span><span class="o">/</span><span class="n">themes</span><span class="err">目录下还有几十种主题可以供你选择</span>
</pre></div>


<p>按照Mac君的设置修改 robbyrussell.zsh-theme文件的第一行</p>
<div class="hlcode"><pre><span class="n">PROMPT</span><span class="o">=</span><span class="err">&#39;</span><span class="o">%</span><span class="p">{</span><span class="err">$</span><span class="n">fg_bold</span><span class="p">[</span><span class="n">red</span><span class="p">]</span><span class="o">%</span><span class="p">}</span><span class="err">➜</span> <span class="o">%</span><span class="p">{</span><span class="err">$</span><span class="n">fg_bold</span><span class="p">[</span><span class="n">green</span><span class="p">]</span><span class="o">%</span><span class="p">}</span><span class="o">%</span><span class="n">p</span> <span class="o">%</span><span class="p">{</span><span class="err">$</span><span class="n">fg</span><span class="p">[</span><span class="n">cyan</span><span class="p">]</span><span class="o">%</span><span class="p">}</span><span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="p">{</span><span class="err">$</span><span class="n">fg_bold</span><span class="p">[</span><span class="n">blue</span><span class="p">]</span><span class="o">%</span><span class="p">}</span><span class="err">$</span><span class="p">(</span><span class="n">git_prompt_info</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="err">$</span><span class="n">fg_bold</span><span class="p">[</span><span class="n">blue</span><span class="p">]</span><span class="o">%</span><span class="p">}</span> <span class="o">%</span> <span class="o">%</span><span class="p">{</span><span class="err">$</span><span class="n">reset_color</span><span class="o">%</span><span class="p">}</span><span class="o">&gt;</span><span class="err">&#39;</span>
</pre></div>


<p>c改为d（c为相对路径，单位绝对路径），在最后加上一个'&gt;'符号</p>
<h5 id="_5">插件</h5>
<p>在~/.zshrc文件中可以看到这么几行</p>
<div class="hlcode"><pre><span class="cp"># Which plugins would you like to load? (plugins can be found in ~/.oh-my-zsh/plugins/*)</span>
<span class="cp"># Custom plugins may be added to ~/.oh-my-zsh/custom/plugins/</span>
<span class="cp"># Example format: plugins=(rails git textmate ruby lighthouse)</span>
<span class="n">plugins</span><span class="o">=</span><span class="p">(</span><span class="n">git</span><span class="p">)</span>
</pre></div>


<p>oh my zsh为我们提供了大量好用的插件
使用的方法是在</p>
<div class="hlcode"><pre><span class="n">plugins</span><span class="o">=</span><span class="p">(</span><span class="n">git</span><span class="p">)</span><span class="err">中加入我们想用的的插件</span>
<span class="n">plugins</span><span class="o">=</span><span class="p">(</span><span class="n">git</span> <span class="n">autojump</span> <span class="n">github</span> <span class="n">ruby</span> <span class="n">python</span><span class="p">)</span>
<span class="err">使用方法查看插件目录下的</span><span class="o">*</span><span class="p">.</span><span class="n">plugin</span><span class="p">.</span><span class="n">zsh</span><span class="err">文件</span>
</pre></div>


<h5 id="git">git</h5>
<p>默认启用了git插件：功能就是在每一个git管理的文件夹中显示git status,并且简化了大量的命令</p>
<div class="hlcode"><pre><span class="err">随便拷贝一段看看</span><span class="p">,</span><span class="err">这些别名都可以在</span><span class="o">~/</span><span class="p">.</span><span class="n">oh</span><span class="o">-</span><span class="n">my</span><span class="o">-</span><span class="n">zsh</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">git</span><span class="p">.</span><span class="n">plugin</span><span class="p">.</span><span class="n">zsh</span><span class="err">文件中查看的到</span>
<span class="cp"># Aliases</span>
<span class="n">alias</span> <span class="n">g</span><span class="o">=</span><span class="err">&#39;</span><span class="n">git</span><span class="err">&#39;</span>
<span class="n">compdef</span> <span class="n">g</span><span class="o">=</span><span class="n">git</span>
<span class="n">alias</span> <span class="n">gst</span><span class="o">=</span><span class="err">&#39;</span><span class="n">git</span> <span class="n">status</span><span class="err">&#39;</span>
<span class="n">compdef</span> <span class="n">_git</span> <span class="n">gst</span><span class="o">=</span><span class="n">git</span><span class="o">-</span><span class="n">status</span>
<span class="n">alias</span> <span class="n">gd</span><span class="o">=</span><span class="err">&#39;</span><span class="n">git</span> <span class="n">diff</span><span class="err">&#39;</span>
<span class="n">compdef</span> <span class="n">_git</span> <span class="n">gd</span><span class="o">=</span><span class="n">git</span><span class="o">-</span><span class="n">diff</span>
<span class="n">alias</span> <span class="n">gl</span><span class="o">=</span><span class="err">&#39;</span><span class="n">git</span> <span class="n">pull</span><span class="err">&#39;</span>
<span class="n">compdef</span> <span class="n">_git</span> <span class="n">gl</span><span class="o">=</span><span class="n">git</span><span class="o">-</span><span class="n">pull</span>
<span class="n">alias</span> <span class="n">gup</span><span class="o">=</span><span class="err">&#39;</span><span class="n">git</span> <span class="n">pull</span> <span class="o">--</span><span class="n">rebase</span><span class="err">&#39;</span>
<span class="n">compdef</span> <span class="n">_git</span> <span class="n">gup</span><span class="o">=</span><span class="n">git</span><span class="o">-</span><span class="n">fetch</span>
<span class="n">alias</span> <span class="n">gp</span><span class="o">=</span><span class="err">&#39;</span><span class="n">git</span> <span class="n">push</span><span class="err">&#39;</span>
<span class="n">compdef</span> <span class="n">_git</span> <span class="n">gp</span><span class="o">=</span><span class="n">git</span><span class="o">-</span><span class="n">push</span>
<span class="n">alias</span> <span class="n">gd</span><span class="o">=</span><span class="err">&#39;</span><span class="n">git</span> <span class="n">diff</span><span class="err">&#39;</span>
<span class="p">.......</span>
</pre></div>


<h5 id="autojump">autojump</h5>
<p>安装</p>
<div class="hlcode"><pre><span class="n">wget</span> <span class="n">https</span><span class="o">:</span><span class="c1">//github.com/downloads/joelthelion/autojump/autojump_v21.1.2.tar.gz</span>
</pre></div>


<p>解压缩后进入目录，执行</p>
<div class="hlcode"><pre><span class="p">.</span><span class="o">/</span><span class="n">install</span><span class="p">.</span><span class="n">sh</span>
</pre></div>


<p>安装完成之后atuojump会返回告诉你
<img alt="autojump安装成功之后" src="http://ww4.sinaimg.cn/large/81d2b157jw1e7l5l9v896j20jt04igm7.jpg" />
完成以上两步之后,就可以体验atuojump的强大了</p>
<div class="hlcode"><pre>    <span class="p">..</span>    <span class="err">#</span><span class="n">cd</span> <span class="p">..</span>
    <span class="o">~</span>     <span class="err">#</span><span class="n">cd</span> <span class="o">~</span>
    <span class="n">j</span> <span class="k">auto</span> <span class="err">#因为我们刚刚访问过</span><span class="n">autojump_v21</span><span class="mf">.1.2</span><span class="err">目录所以</span> <span class="err">‘#</span><span class="n">j</span> <span class="k">auto</span><span class="err">’可以直接跳转到‘</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">yxj</span><span class="o">/</span><span class="n">autojump_v21</span><span class="mf">.1.2</span><span class="err">’目录下</span>
    <span class="err">等等超级多的强大功能，就等你自己去挖掘了</span>
</pre></div>


<h4 id="5-zsh">5. 使用zsh（那些我觉得的好的功能）</h4>
<ol>
<li>兼容bash,无痛转移</li>
<li>
<p>超级强大的<Tab>补全,连按两下<Tab>会列出所有供选择的项,按<tab>方向键可以切换,
    也支持<Ctrl>+npfb(VIM)
    <Ctrl>+n 向下
    <Ctrl>+p 向上
    <Ctrl>+f 向下翻页
    <Ctrl>+b 向上翻页</p>
<p><img alt="zsh补全.png" src="http://ww3.sinaimg.cn/large/81d2b157jw1e7ry1p92m4j20ej057mxy.jpg" /></p>
</li>
<li>
<p>zsh 除了支持目录的补全，还支持命令选项的补全，例如 ls -<TAB><TAB> 会直接列出所有 ls 的参数，
   再也不会出现一个命令打到一半，忘记参数导致重开一个 terminal man 一把。
   <img alt="zsh命令参数补全" src="http://ww2.sinaimg.cn/large/81d2b157jw1e7ryfepje2j20hj09uaco.jpg" /></p>
</li>
<li>kill 进程名<Tab>  会直接转换成id
   ssh
   apt-get
   等等,各种补全</li>
<li>
<p>更智能的目录补全
   cd /h/y/D/L/c/<Tab>会自动补全成
   cd /home/yxj/Dropbox/Linux/configuration(当然前提是这种匹配是唯一的)
   <img alt="zsh&lt;Tab&gt;首字母匹配" src="http://ww4.sinaimg.cn/large/81d2b157jw1e7ryuksq5cj20dw02w3yv.jpg" title="" /></p>
</li>
<li>
<p>记录你切换过的路径直接输入1~9切换(0是当前目录),用d查看当前stack中存放的历史目录</p>
<p><img alt="1~9切换目录" src="http://ww2.sinaimg.cn/large/81d2b157jw1e7rz40abb3j209e075jrv.jpg" />
6. 更强大的目录跳转可以用autojump插件,autojump插件可以记住你所有访问过的目录
   直接<code>#j Dr</code>就能跳转到Dropbox目录</p>
</li>
</ol>
<p><img alt="atuojump" src="http://ww2.sinaimg.cn/large/81d2b157jw1e7rzbbzfmmj209d03dmx8.jpg" title="" /></p>
<ol>
<li>更强大的alias</li>
</ol>
<div class="hlcode"><pre><span class="cp"># Example aliases</span>
<span class="cp"># alias zshconfig=&quot;mate ~/.zshrc&quot;</span>
<span class="cp"># alias ohmyzsh=&quot;mate ~/.oh-my-zsh&quot;</span>
<span class="cp">#####别名设置</span>
<span class="n">alias</span> <span class="o">-</span><span class="n">s</span> <span class="n">md</span><span class="o">=</span><span class="n">mdcharm</span>   <span class="err">#在命令行直接输入后缀为</span> <span class="n">md</span> <span class="err">的文件名，会在</span> <span class="n">mdcharm</span> <span class="err">中打开</span>
<span class="cp">########</span>
</pre></div>


<ol>
<li>丰富漂亮的主题</li>
</ol>
<div class="hlcode"><pre><span class="cp"># Set name of the theme to load.</span>
<span class="cp"># Look in ~/.oh-my-zsh/themes/</span>
<span class="cp"># Optionally, if you set this to &quot;random&quot;, it&#39;ll load a random theme each</span>
<span class="cp"># time that oh-my-zsh is loaded.</span>
<span class="n">ZSH_THEME</span><span class="o">=</span><span class="s">&quot;robbyrussell&quot;</span>
</pre></div>


<p>还可以自己改主题</p>
<ol>
<li>插件体系
    git,github等等很实用</li>
</ol>
<h2 id="_6">说明</h2>
<p>原文写作于2013年7月，2015年7月整理发布在我的个人 Wiki 上。</p>
<ol>
<li>oh-my-zsh 自带的插件<code>z</code>实现了和<code>autojump</code>同样的功能，开启方法更简单。</li>
<li>插件<code>sudo</code> 只要按<code>Esc</code>两下就可以在输入命令的时候在前面加上 sudo</li>
<li>web-search <code>google keyword</code> in your terminal.</li>
</ol>
</div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2012-2015 yxjxx.
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
        
    </body>
</html>